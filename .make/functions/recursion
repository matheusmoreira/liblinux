# Recursively calls a function on lists and aggregates the results.
#
# The base case predicate function takes a list element as argument
# and determines whether it is a base case.
# If an element is a base case, it is returned in the result.
# If an element is not a base case, it is returned in the result
# along with the results of recursing with a new list
# generated by applying the given function to the element.
#
# Arguments:
#   $(1) = recursive element generator function
#   $(2) = base case predicate function
#   $(3) = initial list of values
#
# Returns:
#   list containing all recursively computed values
#
recurse = $(foreach x,$(3),$(if $(call $(2),$(x)),$(x),$(x) $(call recurse,$(1),$(2),$(call $(1),$(x)))))
