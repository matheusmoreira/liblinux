# Rule template for executables.
#
# The reason why the executables depend on their dependency data file
# is to trigger the generation of their dependency data when they are updated.
# Once generated, future executions of make will include and benefit from the dependency data.
# Dependency data file generation rules are defined in .make/targets/dependencies.
#
# Arguments:
#   $(1) = path to the executable file
#   $(2) = paths to the object files
#   $(3) = additional dependencies
#   $(4) = compiler
#   $(5) = compiler options
#   $(6) = compiler executable
#
# Returns:
#   rules for compiling the objects in $(2) into the executable $(1)
#
# References:
#
#     https://make.mad-scientist.net/papers/advanced-auto-dependency-generation/#depdelete
#
executable_rule_template = $(call rule_template,$(1),$(call $(4).link,$(2),$(1),$(5),$(6)),$(2) $(3),$(dir $(1)))

# Computes the parameters for and evaluates the executable rule template.
#
# Arguments:
#   $(1) = executable name
#   $(2) = executable sources
#   $(3) = additional dependencies
#   $(4) = compiler
#   $(5) = compiler options
#   $(6) = compiler executable
#
# Returns:
#   rules for compiling the objects generated from the sources in $(2)
#   into the executable named $(1)
#
generate_executable_rule = $(call executable_rule_template,$(call to_executable,$(1)),$(call to_object,$(2)),$(3),$(4),$(5),$(6))
